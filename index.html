<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
  // 连接到本地服务器
  const socket = io("http://localhost:3000"); 
  let username = "游客";

  // 设置昵称
  function setName() {
    username = document.getElementById("name").value || "游客";
  }

  // 发送消息
  function send() {
    const text = document.getElementById("message").value;
    socket.emit("chat", { user: username, msg: text });
    document.getElementById("message").value = "";
  }

  // 接收消息
  socket.on("chat", (data) => {
    const chat = document.getElementById("chat");
    chat.innerHTML += `<p>[${data.time}] <b>${data.user}</b>: ${data.msg}</p>`;
    chat.scrollTop = chat.scrollHeight;
  });
</script>
